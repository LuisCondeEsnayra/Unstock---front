"use strict";(self.webpackChunkunstock_front=self.webpackChunkunstock_front||[]).push([[939],{6739:(e,s,l)=>{l.d(s,{A:()=>a});l(5043);var t=l(579);const a=e=>{let{text:s}=e;return(0,t.jsx)("h1",{className:"text-center mb-3",children:s})}},939:(e,s,l)=>{l.r(s),l.d(s,{default:()=>V});var t=l(5043),a=l(2192),n=l(861),c=l(4101),r=l(4709),i=l(5104),d=l(6105),o=l(4227),h=l(183),x=l(579);const m=e=>{const{name:s,image:l,sell:a,type:n,ingredients:r,recipe:m,yields:u,sellCost:j}=e.recipe;const p=()=>{let e=0;return r.forEach((s=>{e+=(e=>{const s=h.find((s=>s.name===e.ingredient.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"_")));if(s)return parseFloat(s.price/s.quantity)*e.quantity;return 0})(s),console.log(e)})),e},[g,v]=(0,t.useState)(0);return(0,t.useEffect)((()=>{v(p())}),[r]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.V,{children:(0,x.jsx)("h5",{className:"text-center",children:s})}),(0,x.jsx)(d.W,{children:(0,x.jsxs)(c.s,{className:"justify-content-center",children:[(0,x.jsx)(o.U,{xs:"auto",className:"text-center",children:(0,x.jsx)("img",{style:{maxHeight:"40vh",maxWidth:"300px"},src:l,alt:s})}),(0,x.jsxs)(o.U,{children:[(0,x.jsxs)(c.s,{children:[(0,x.jsx)("h5",{children:"Descripci\xf3n"}),(0,x.jsxs)("div",{className:"col-6",children:[(0,x.jsxs)("p",{children:["Cantidad de venta: ",a," ",n]}),(0,x.jsxs)("p",{children:["Rendimiento de receta: ",u," ",n]})]}),(0,x.jsxs)("div",{className:"col-6",children:[(0,x.jsxs)("p",{children:["Precio de venta(",a," ",n,"): $",j]}),(0,x.jsxs)("p",{children:["Costo de receta(",u," ",n,"): $",g.toFixed(2)]})]})]}),(0,x.jsx)(c.s,{children:(0,x.jsxs)(o.U,{children:[(0,x.jsx)("h5",{children:"Ingredientes"}),(0,x.jsx)("ul",{className:"mx-5",children:r.map(((e,s)=>(0,x.jsxs)("li",{children:[e.quantity," ",e.measure," de"," ",e.ingredient]},s)))})]})}),(0,x.jsxs)(c.s,{children:[(0,x.jsx)("h5",{children:"Receta"}),(0,x.jsx)("p",{children:m})]})]})]})})]})};var u=l(3354);const j="recipeCard_card__FySoR",p="recipeCard_recipeImage__UlvYo",g="recipeCard_midBar__g3RCm",v="recipeCard_circleIcon__VywJ+";var y=l(6066);const C=e=>{const{name:s,image:l}=e.recipe;return(0,x.jsxs)("div",{onClick:e.handleShowMore,className:j,children:[(0,x.jsx)("h5",{children:s}),(0,x.jsx)("div",{className:`bg-success ${g} text-center`,children:(0,x.jsx)("div",{children:(0,x.jsx)(u.Ay,{className:v,icon:y.w,size:"xxl"})})}),(0,x.jsx)("img",{src:l,alt:s,className:`${p}`})]})},N="RecipesGrid_cardHeight__zIZxe",b=e=>(0,x.jsx)(c.s,{className:`${N} overflow-auto `,children:e.filteredData.map(((s,l)=>(0,x.jsx)(o.U,{xs:"12",sm:"6",md:"3",className:"  mb-4 text-center",children:(0,x.jsx)("div",{className:"w-100 ps-2",children:(0,x.jsx)(C,{recipe:s,handleShowMore:()=>e.handleShowMore(l)})})},l)))});var S=l(4398),f=l(2382),k=l(6323),R=l(3526),_=l(5968),w=l(5823),A=l(825),F=l(4231),I=l(6152),D=l(2261),E=l(2686),Q=l(2);const U=e=>{let{setType:s}=e;const[l,a]=(0,t.useState)("");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.s,{children:(0,x.jsx)(w.A,{htmlFor:"cantidad",children:"Cantidad:"})}),(0,x.jsx)(c.s,{children:(0,x.jsxs)(I.j,{id:"cantidad",children:[(0,x.jsx)(D.V,{children:l.length>0?l:"Medida"}),(0,x.jsx)(E.Q,{children:[{value:"gr",label:"Gramos"},{value:"ml",label:"Mililitros"},{value:"piezas",label:"Piezas"}].map(((e,l)=>(0,x.jsx)(Q.k,{onClick:()=>{return a((l=e).label),void s(l.value);var l},children:e.label},l)))})]})})]})},M=e=>{let{checkCompletion:s,setProductData:l,productData:a}=e;const[n,r]=(0,t.useState)(a.productName||""),[i,d]=(0,t.useState)(a.sellQuantity||""),[h,m]=(0,t.useState)(a.yieldRecipe||""),[u,j]=(0,t.useState)(a.image||""),[p,g]=(0,t.useState)(a.recipe||""),[v,y]=(0,t.useState)(a.sellCost||""),[C,N]=(0,t.useState)(a.type||"");return(0,t.useEffect)((()=>{l({productName:n,sellQuantity:i,yieldRecipe:h,image:u,recipe:p,sellCost:v,type:C}),s()}),[n,i,h,u,p,v,C]),(0,x.jsxs)(c.s,{children:[(0,x.jsxs)(o.U,{md:"6",className:"mb-3",children:[(0,x.jsx)(w.A,{htmlFor:"name",children:"Nombre"}),(0,x.jsx)(A.O,{type:"text",id:"name",value:n,onChange:e=>r(e.target.value),placeholder:"Nombre",className:"mb-3"}),(0,x.jsx)(w.A,{htmlFor:"sellCost",children:"Costo de venta"}),(0,x.jsx)(A.O,{type:"number",id:"sellCost",value:v,min:0,onChange:e=>y(e.target.value),placeholder:"Costo de venta",className:"mb-3"}),(0,x.jsxs)(c.s,{children:[(0,x.jsxs)(o.U,{children:[(0,x.jsx)(w.A,{htmlFor:"sell",children:"Cantidad de venta"}),(0,x.jsx)(A.O,{type:"number",id:"sell",min:0,value:i,onChange:e=>d(e.target.value),placeholder:"Ej. 2",className:"mb-3"})]}),(0,x.jsxs)(o.U,{children:[(0,x.jsx)(U,{setType:N})," "]})]})]}),(0,x.jsxs)(o.U,{children:[(0,x.jsx)(w.A,{htmlFor:"yield",children:"Rendimiento de Receta"}),(0,x.jsx)(A.O,{type:"number",id:"yield",min:0,value:h,onChange:e=>m(e.target.value),placeholder:"Rendimiento de Receta",className:"mb-3"}),(0,x.jsx)(w.A,{htmlFor:"image",children:"Imagen"}),(0,x.jsx)(A.O,{type:"text",id:"image",value:u,onChange:e=>j(e.target.value),placeholder:"Imagen URL",className:"mb-3"}),(0,x.jsx)(w.A,{htmlFor:"recipe",children:"Receta"}),(0,x.jsx)(F.I,{id:"recipe",value:p,onChange:e=>g(e.target.value),rows:3,className:"mb-3"})]})]})},O=e=>{let{ingredient:s,quantity:l,setQuantity:t,type:a,handleInputChange:n}=e;return(0,x.jsxs)(c.s,{children:[(0,x.jsx)("div",{className:"col-8",children:(0,x.jsx)(A.O,{type:"text",value:s,placeholder:"Ingrediente",disabled:!0,onChange:n})}),(0,x.jsx)("div",{className:"col-4",children:(0,x.jsxs)(c.s,{children:[(0,x.jsx)("div",{className:"col-8",children:(0,x.jsx)(A.O,{type:"number",value:l,onChange:e=>{t(e.target.value),n()},placeholder:"Cantidad"})}),(0,x.jsx)("div",{className:"col-4",children:a&&(0,x.jsx)("p",{className:"pt-2",children:a})})]})})]})},q=e=>{let{addedIngredients:s}=e;return(0,x.jsx)(c.s,{className:"mt-4",children:(0,x.jsx)(o.U,{children:(0,x.jsxs)(n.E,{children:[(0,x.jsx)(i.V,{children:"Ingredientes A\xf1adidos"}),(0,x.jsx)(d.W,{children:s.map(((e,s)=>(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsx)("strong",{children:e.ingredient})," - ",e.quantity," (",e.type,")"]},s)))})]})})})},z=e=>{let{onClick:s,isDisabled:l}=e;return(0,x.jsx)(r.Q,{className:"btn",onClick:s,disabled:l,children:"Crear receta"})},L=e=>{let{options:s=[],renderItem:l,onSelect:a}=e;const[n,c]=(0,t.useState)(""),[r,i]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(n&&n.length>1){const e=s.filter((e=>e.label.toLowerCase().includes(n.toLowerCase())));i(e)}else i([])}),[n,s]);return(0,x.jsxs)("div",{className:"multi-select",children:[(0,x.jsx)("input",{value:n,onChange:e=>c(e.target.value),type:"text",placeholder:"Busca y selecciona"}),r.length>0&&(0,x.jsx)("div",{className:"results-dropdown",children:r.map(((e,s)=>(0,x.jsx)("div",{onClick:()=>{return(s=e)&&a([s]),void c("");var s},className:"result-item",children:l(e)},s)))})]})},B=e=>{const[s,l]=(0,t.useState)(""),[a,n]=(0,t.useState)(""),[c,i]=(0,t.useState)(""),[d,o]=(0,t.useState)([]),[m,u]=(0,t.useState)({productName:"",cost:"",sellQuantity:"",yieldRecipe:"",image:"",recipe:"",sellCost:"",type:""}),[j,p]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!0),y=()=>{console.log(s,a,c),p(!(s&&a&&c))},C=()=>""!==m.productName&&m.cost>0&&""!==m.type&&m.sellQuantity>0&&m.yieldRecipe>0&&""!==m.image&&""!==m.recipe&&m.sellCost>0&&d.length>0;(0,t.useEffect)((()=>{const e=C();v(!e),y()}),[d,m,s,a,c]);return(0,x.jsxs)(S.z,{alignment:"center",scrollable:!0,size:"xl",visible:e.visible,onClose:()=>{e.closeModal(),o([])},"aria-labelledby":"Ordenes",children:[(0,x.jsx)(f.E,{children:"Productos"}),(0,x.jsx)(k.T,{children:(0,x.jsxs)(R.T,{children:[(0,x.jsx)(M,{checkCompletion:C,setProductData:u,productData:m}),(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(L,{options:h,renderItem:e=>(0,x.jsx)("span",{children:e.label}),onSelect:e=>{if(e&&e.length>0){const s=e[0];l(s.label),i(s.type)}}})}),(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(O,{ingredient:s,quantity:a,setQuantity:n,type:c,handleInputChange:y})}),(0,x.jsx)(r.Q,{className:"btn-dark",onClick:()=>{if(s&&a&&c){const e={ingredient:s,quantity:a,type:c};o((s=>[...s,e])),l(""),n(""),i(""),p(!0)}},disabled:j,children:"A\xf1adir"}),(0,x.jsx)(r.Q,{className:"btn-dark ms-2",disabled:0===d.length,onClick:()=>{o([]),v(!0)},children:"Borrar"}),d.length>0&&(0,x.jsx)(q,{addedIngredients:d})]})}),(0,x.jsx)(_.I,{children:(0,x.jsx)(z,{onClick:()=>{const s={id:Date.now(),name:m.productName,image:m.image,recipe:m.recipe,ingredients:d,sell:m.sellCost,yields:m.yieldRecipe,type:m.type};e.onAddRecipe(s),o([]),e.closeModal()},isDisabled:g})})]})};var P=l(9833);const $=()=>{const[e,s]=(0,t.useState)([]),[l,i]=(0,t.useState)(""),[d,o]=(0,t.useState)(null),[h,j]=(0,t.useState)(!1);(0,t.useEffect)((()=>{s(a._)}),[]);const p=e.filter((e=>e.name.toLowerCase().includes(l.toLowerCase()))),g=()=>{j(!1)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(n.E,{className:"mb-3 px-2",children:[(0,x.jsxs)(c.s,{children:[(0,x.jsxs)("div",{className:"col mt-5 ms-4",children:[(0,x.jsx)("label",{htmlFor:"search",children:"Buscar Receta:"}),(0,x.jsx)("input",{id:"search",type:"text",placeholder:"Buscar receta",value:l,onChange:e=>{i(e.target.value)},className:"ms-3"})]}),(0,x.jsx)("div",{className:"col-3 mt-4",children:(0,x.jsxs)(r.Q,{className:"text-middle btn-dark",onClick:()=>{j(!0)},children:[(0,x.jsx)(u.Ay,{icon:P.x}),(0,x.jsx)("p",{children:"A\xf1adir Receta"})]})}),(0,x.jsx)("div",{className:"px-4",children:(0,x.jsx)("hr",{})})]}),0!==p.length?(0,x.jsx)(b,{handleShowMore:o,filteredData:p}):(0,x.jsx)("h3",{className:"text-center m-5",children:"No hay recetas para mostrar "})]}),(0,x.jsx)(B,{visible:h,closeModal:g,onAddRecipe:e=>{s((s=>[...s,e])),g()}}),null!=d&&(0,x.jsx)(n.E,{children:(0,x.jsx)(m,{recipe:e[d]})})]})};var T=l(6739);const V=()=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.A,{text:"Recetas"}),(0,x.jsx)($,{})]})}}]);
//# sourceMappingURL=939.21034774.chunk.js.map